<analysis>
The previous AI engineer focused on enhancing the  application, particularly the Certificate List functionality and associated features. Key initial work involved fixing Google Drive issues, improving UX, and resolving backend performance problems. Recent efforts debugged the Upcoming Survey Check feature, ensuring certificates due within a ±3 month window are displayed, which involved extensive backend and frontend logic verification and fixing an authentication issue. Subsequently, the engineer implemented displaying company names instead of IDs, added an Exclude from Auto Update checkbox for certificate next survey dates, and refactored bulk operations (delete, view, download, copy links, auto rename) to be accessible via a context menu, mimicking the V1 behavior. The Auto Rename File feature was implemented with a specific naming format. Frontend issues like JSX syntax errors, null reference errors for context menus, context menu positioning, and duplicate context menu options were debugged and resolved. The final fix addressed an unwanted Original File Name tooltip.
</analysis>

<product_requirements>
The  application aims to enhance ship management, transitioning from  to . Core features include a secure Google Drive integration for DB backup/restore, dynamic UI elements, and a streamlined Add New Ship flow with AI analysis. Ship details display , and UI elements are localized to Vietnamese. Edit Ship and Delete Ship modals support various deletion options. Recalculation icons for Next Docking, Special Survey Cycle, and Anniversary Date were added. The Certificate List mirrors V1’s layout, supporting filters, search, and sorting. Add Ship Certificate includes AI auto-fill, duplicate/mismatch handling, and sequential multi-upload. Edit/Delete certificate functionalities and quick/bulk survey type updates are implemented. The Upcoming Survey Check modal displays certificates due within a ±3 month window. Newer requirements involve displaying company names, an Exclude from Auto Update checkbox, file management (double-click to open PDF, file upload with certificate, file link pre-fetching), and advanced features like batch operations (delete, export, download, copy links via context menu), certificate notes, and an auto-rename file feature with a specific naming format.
</product_requirements>

<key_technical_concepts>
- **Frontend**: React.js, Context API, React Router, custom hooks, , , Tailwind CSS.
- **Backend**: FastAPI, MongoDB (UUIDs, ISO strings), Pydantic, JWT authentication, , .
- **Integrations**: Google Drive API (via Apps Script proxy), Emergent LLM key.
- **Utilities**: Date helper functions.
</key_technical_concepts>

<code_architecture>

-   ****: The core FastAPI backend. Changes included adding , returning  in , handling  in certificate updates and auto-survey logic, defining  and , ensuring  is in , and modifying file naming logic for auto-rename.
-   ****: Handles MongoDB interactions. Debugged for  environment variable issues.
-   ****: Manages Google Drive interactions. Confirmed existing  endpoint.
-   ****: The main page for certificate management. This file saw extensive modifications:
    -   Updated  to use the correct Google Drive view endpoint.
    -   Implemented state and function for link caching (, ).
    -   Integrated  with new props for loading/status.
    -   Added handlers for , , .
    -   Refactored the context menu to include bulk operations (delete, view, download, copy links, auto rename) and ensure  is available for single selections only.
    -   Integrated  and .
    -   Fixed multiple JSX syntax errors and runtime errors related to context menu initialization and rendering, ensuring optional chaining for null objects.
    -   Implemented context menu position adjustment and click-outside handler for better UX.
-   ****: Displays certificate data. Modified to accept  prop, render a notes icon, and remove a problematic custom Original File Name tooltip.
-   ****: Removed the incorrect bulk delete button, adapting to the new context menu approach.
-   ****: Modified to display  instead of .
-   ****: Modified to include an  checkbox and updated its prefill logic.
-   ****: *New file created* to handle viewing/editing certificate notes.
-   ****: *New file created* for displaying auto-rename progress.
-   ****: Involved in debugging login issues.
-   ****: Involved in debugging login issues.
-   ****: Involved in debugging login issues.
</code_architecture>

<pending_tasks>
-   Sync from Drive (restore database) functionality UI integration and full testing in the frontend.
-   Bulk export/download (for certificates via context menu).
-   Certificate File Viewer (embedded PDF viewer in modal, navigation, zoom, etc.).
</pending_tasks>

<current_work>
Immediately before this summary request, the AI engineer was addressing a UI anomaly where an Original File Name tooltip with a black background was being displayed in the  component. This custom tooltip was identified as redundant and visually inconsistent, as native HTML  attributes were already providing tooltip functionality. The task involved locating and removing the specific JSX code responsible for rendering this custom tooltip in . This fix was implemented to streamline the UI and rely on the standard browser tooltip behavior.
</current_work>

<optional_next_step>
Verify that the custom Original File Name tooltip is no longer displayed, and native HTML tooltips function correctly in the Certificate List table.
</optional_next_step>
